{"ast":null,"code":"var _jsxFileName = \"/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js\",\n    _s = $RefreshSig$();\n\nimport config from \"config\";\nimport axios from \"axiosConfig\";\nimport Auth from \"layouts/Auth.js\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport FAKE_DATA from \"constants/fakeData\";\nimport HttpUtil from \"util/HttpUtil\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Application() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    addToast\n  } = useToasts();\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  useEffect(() => {\n    const onLoad = async () => {\n      if (localStorage.getItem('JWT')) {\n        axios.get(config.API_URL + ENUMS.API_ROUTES.AUTH_STATUS, { ...HttpUtil.adminHttpHeaders()\n        }).then(res => {\n          dispatch(allActions.authActions.setUserState(res.data.user));\n          dispatch(allActions.authActions.setUserProjectIds(res.data.project));\n          userHasAuthenticated(true);\n          setIsAuthenticating(false);\n        }).catch(error => {\n          userHasAuthenticated(false);\n          setIsAuthenticating(false);\n\n          if (error.response) {\n            if (error.response.data && error.response.data.message === 'jwt expired') {\n              localStorage.removeItem('JWT');\n              addToast(\"Your login token has expired. Please login again!\", {\n                appearance: 'info'\n              });\n              console.error(error.response.data.message);\n            } else {\n              console.log(error.response); // TODO: remove the comments\n              // addToast(\n              //     error.response.data ? \n              //         error.response.data.message : \n              //         \"Failed to fetch user details. Please login again!\", \n              //     { \n              //         appearance: 'error',\n              //         autoDismiss: true\n              //     }\n              // );\n            }\n          }\n        });\n      } else {\n        setIsAuthenticating(false);\n      }\n    };\n\n    onLoad();\n  }, [addToast, dispatch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !isAuthenticating && /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        isAuthenticated,\n        userHasAuthenticated\n      },\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.ADMIN,\n            render: props => /*#__PURE__*/_jsxDEV(Admin, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.AUTH,\n            render: props => /*#__PURE__*/_jsxDEV(Auth, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n            from: \"/\",\n            to: \"/auth/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            render: props => /*#__PURE__*/_jsxDEV(NotFound, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(Application, \"fmXUlRKp4s0ZpaVC0nsb/tRn6bI=\", false, function () {\n  return [useDispatch, useToasts];\n});\n\n_c = Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js"],"names":["config","axios","Auth","Admin","ENUMS","useDispatch","allActions","AppContext","React","useState","useEffect","NotFound","useToasts","BrowserRouter","Route","Switch","Redirect","FAKE_DATA","HttpUtil","Application","dispatch","addToast","isAuthenticated","userHasAuthenticated","isAuthenticating","setIsAuthenticating","onLoad","localStorage","getItem","get","API_URL","API_ROUTES","AUTH_STATUS","adminHttpHeaders","then","res","authActions","setUserState","data","user","setUserProjectIds","project","catch","error","response","message","removeItem","appearance","console","log","ROUTES","ADMIN","props","AUTH"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,aAAT,EAAwBC,KAAxB,EAA+BC,MAA/B,EAAuCC,QAAvC,QAAuD,kBAAvD;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,QAAP,MAAqB,eAArB;;;AAEA,eAAe,SAASC,WAAT,GAAwB;AAAA;;AACnC,QAAMC,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAM;AAAEgB,IAAAA;AAAF,MAAeT,SAAS,EAA9B;AAEA,QAAM,CAACU,eAAD,EAAkBC,oBAAlB,IAA0Cd,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAACe,gBAAD,EAAmBC,mBAAnB,IAA0ChB,QAAQ,CAAC,IAAD,CAAxD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMgB,MAAM,GAAG,YAAY;AACvB,UAAIC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAJ,EAAiC;AAC7B3B,QAAAA,KAAK,CAAC4B,GAAN,CAAU7B,MAAM,CAAC8B,OAAP,GAAiB1B,KAAK,CAAC2B,UAAN,CAAiBC,WAA5C,EACA,EACI,GAAGd,QAAQ,CAACe,gBAAT;AADP,SADA,EAICC,IAJD,CAIMC,GAAG,IAAI;AACTf,UAAAA,QAAQ,CAACd,UAAU,CAAC8B,WAAX,CAAuBC,YAAvB,CAAoCF,GAAG,CAACG,IAAJ,CAASC,IAA7C,CAAD,CAAR;AACAnB,UAAAA,QAAQ,CAACd,UAAU,CAAC8B,WAAX,CAAuBI,iBAAvB,CAAyCL,GAAG,CAACG,IAAJ,CAASG,OAAlD,CAAD,CAAR;AACAlB,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACH,SATD,EAUCiB,KAVD,CAUOC,KAAK,IAAI;AACZpB,UAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAE,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;;AACA,cAAIkB,KAAK,CAACC,QAAV,EAAoB;AAChB,gBAAID,KAAK,CAACC,QAAN,CAAeN,IAAf,IAAuBK,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAApB,KAAgC,aAA3D,EAA0E;AACtElB,cAAAA,YAAY,CAACmB,UAAb,CAAwB,KAAxB;AACAzB,cAAAA,QAAQ,CAAC,mDAAD,EAAsD;AAAE0B,gBAAAA,UAAU,EAAE;AAAd,eAAtD,CAAR;AACAC,cAAAA,OAAO,CAACL,KAAR,CAAcA,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAAlC;AACH,aAJD,MAKK;AACDG,cAAAA,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACC,QAAlB,EADC,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAEJ;AACJ,SAlCD;AAmCH,OApCD,MAqCK;AACDnB,QAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACH;AACJ,KAzCD;;AA0CAC,IAAAA,MAAM;AACT,GA5CQ,EA4CN,CAACL,QAAD,EAAWD,QAAX,CA5CM,CAAT;AA8CA,sBACI;AAAA,cACM,CAACI,gBAAD,iBACF,QAAC,UAAD,CAAY,QAAZ;AAAqB,MAAA,KAAK,EAAE;AAAEF,QAAAA,eAAF;AAAmBC,QAAAA;AAAnB,OAA5B;AAAA,6BACI,QAAC,aAAD;AAAA,+BACI,QAAC,MAAD;AAAA,kCACI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAEnB,KAAK,CAAC8C,MAAN,CAAaC,KAA1B;AAAiC,YAAA,MAAM,EAAEC,KAAK,iBAAI,QAAC,KAAD,OAAWA,KAAX;AAAkB,cAAA,eAAe,EAAE9B;AAAnC;AAAA;AAAA;AAAA;AAAA;AAAlD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAElB,KAAK,CAAC8C,MAAN,CAAaG,IAA1B;AAAgC,YAAA,MAAM,EAAED,KAAK,iBAAI,QAAC,IAAD,OAAUA,KAAV;AAAiB,cAAA,eAAe,EAAE9B;AAAlC;AAAA;AAAA;AAAA;AAAA;AAAjD;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAOI,QAAC,QAAD;AAAU,YAAA,IAAI,EAAC,GAAf;AAAmB,YAAA,EAAE,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAQI,QAAC,KAAD;AAAO,YAAA,MAAM,EAAE8B,KAAK,iBAAI,QAAC,QAAD,OAAcA;AAAd;AAAA;AAAA;AAAA;AAAA;AAAxB;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFJ,mBADJ;AAoBH;;GAzEuBjC,W;UACHd,W,EACIO,S;;;KAFDO,W","sourcesContent":["import config from \"config\";\nimport axios from \"axiosConfig\";\nimport Auth from \"layouts/Auth.js\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport FAKE_DATA from \"constants/fakeData\";\nimport HttpUtil from \"util/HttpUtil\";\n\nexport default function Application () {\n    const dispatch = useDispatch();\n    const { addToast } = useToasts();\n\n    const [isAuthenticated, userHasAuthenticated] = useState(false);\n    const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n    useEffect(() => {\n        const onLoad = async () => {\n            if (localStorage.getItem('JWT')) {\n                axios.get(config.API_URL + ENUMS.API_ROUTES.AUTH_STATUS,\n                {\n                    ...HttpUtil.adminHttpHeaders()\n                })\n                .then(res => {\n                    dispatch(allActions.authActions.setUserState(res.data.user));\n                    dispatch(allActions.authActions.setUserProjectIds(res.data.project));\n                    userHasAuthenticated(true);\n                    setIsAuthenticating(false);\n                })\n                .catch(error => {\n                    userHasAuthenticated(false);\n                    setIsAuthenticating(false);\n                    if (error.response) {\n                        if (error.response.data && error.response.data.message === 'jwt expired') {\n                            localStorage.removeItem('JWT');\n                            addToast(\"Your login token has expired. Please login again!\", { appearance: 'info' });\n                            console.error(error.response.data.message);\n                        }\n                        else {\n                            console.log(error.response)\n                            // TODO: remove the comments\n                            // addToast(\n                            //     error.response.data ? \n                            //         error.response.data.message : \n                            //         \"Failed to fetch user details. Please login again!\", \n                            //     { \n                            //         appearance: 'error',\n                            //         autoDismiss: true\n                            //     }\n                            // );\n                        }\n                        \n                    }\n                })\n            }\n            else {\n                setIsAuthenticating(false);\n            }\n        }      \n        onLoad();\n    }, [addToast, dispatch]);\n  \n    return (\n        <>\n            { !isAuthenticating &&\n            <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n                <BrowserRouter>\n                    <Switch>\n                        <Route path={ENUMS.ROUTES.ADMIN} render={props => <Admin {...props} isAuthenticated={isAuthenticated} />} />\n                        <Route path={ENUMS.ROUTES.AUTH} render={props => <Auth {...props} isAuthenticated={isAuthenticated} />} />\n                        {/* \n                        // TODO: remove the comments\n                        <Redirect from=\"/\" to=\"/auth/home\" /> \n                        */} \n                        <Redirect from=\"/\" to=\"/auth/login\" />\n                        <Route render={props => <NotFound {...props} />} />\n                    </Switch>\n                </BrowserRouter>\n            </AppContext.Provider>\n            }\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}