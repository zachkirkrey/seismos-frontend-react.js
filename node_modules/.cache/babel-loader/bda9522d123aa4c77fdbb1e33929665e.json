{"ast":null,"code":"var _jsxFileName = \"/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js\",\n    _s = $RefreshSig$();\n\nimport config from \"config\";\nimport axios from \"axiosConfig\";\nimport Auth from \"layouts/Auth.js\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport FAKE_DATA from \"constants/fakeData\";\nimport HttpUtil from \"util/HttpUtil\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Application() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    addToast\n  } = useToasts();\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n  const logOutUser = () => {\n    userHasAuthenticated(false);\n    dispatch(allActions.authActions.userLoggedOut());\n    localStorage.removeItem('JWT');\n    history.push('/auth/login');\n  };\n\n  useEffect(() => {\n    const onLoad = async () => {\n      if (localStorage.getItem('JWT')) {\n        axios.get(config.API_URL + ENUMS.API_ROUTES.AUTH_STATUS, { ...HttpUtil.adminHttpHeaders()\n        }).then(res => {\n          console.log(res);\n          dispatch(allActions.authActions.setUserState(res.data.user));\n          console.log(res.data.project_ids);\n          dispatch(allActions.authActions.setUserProjectIds(res.data.project_ids));\n          userHasAuthenticated(true);\n          setIsAuthenticating(false);\n        }).catch(error => {\n          setIsAuthenticating(false);\n\n          if (error.response) {\n            logOutUser();\n          }\n        });\n      } else {\n        setIsAuthenticating(false);\n      }\n    };\n\n    onLoad();\n  }, [addToast, dispatch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !isAuthenticating && /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        isAuthenticated,\n        userHasAuthenticated\n      },\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.ADMIN,\n            render: props => /*#__PURE__*/_jsxDEV(Admin, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.AUTH,\n            render: props => /*#__PURE__*/_jsxDEV(Auth, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n            from: \"/\",\n            to: \"/auth/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            render: props => /*#__PURE__*/_jsxDEV(NotFound, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(Application, \"fmXUlRKp4s0ZpaVC0nsb/tRn6bI=\", false, function () {\n  return [useDispatch, useToasts];\n});\n\n_c = Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js"],"names":["config","axios","Auth","Admin","ENUMS","useDispatch","allActions","AppContext","React","useState","useEffect","NotFound","useToasts","BrowserRouter","Route","Switch","Redirect","FAKE_DATA","HttpUtil","Application","dispatch","addToast","isAuthenticated","userHasAuthenticated","isAuthenticating","setIsAuthenticating","logOutUser","authActions","userLoggedOut","localStorage","removeItem","history","push","onLoad","getItem","get","API_URL","API_ROUTES","AUTH_STATUS","adminHttpHeaders","then","res","console","log","setUserState","data","user","project_ids","setUserProjectIds","catch","error","response","ROUTES","ADMIN","props","AUTH"],"mappings":"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","sourcesContent":["import config from \"config\";\nimport axios from \"axiosConfig\";\nimport Auth from \"layouts/Auth.js\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport FAKE_DATA from \"constants/fakeData\";\nimport HttpUtil from \"util/HttpUtil\";\n\nexport default function Application () {\n    const dispatch = useDispatch();\n    const { addToast } = useToasts();\n\n    const [isAuthenticated, userHasAuthenticated] = useState(false);\n    const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n    const logOutUser = () => {\n        userHasAuthenticated(false);\n        dispatch(allActions.authActions.userLoggedOut());\n        localStorage.removeItem('JWT');\n        history.push('/auth/login');\n    }\n\n    useEffect(() => {\n        const onLoad = async () => {\n            if (localStorage.getItem('JWT')) {\n                axios.get(config.API_URL + ENUMS.API_ROUTES.AUTH_STATUS,\n                {\n                    ...HttpUtil.adminHttpHeaders()\n                })\n                .then(res => {\n                    console.log(res)\n                    dispatch(allActions.authActions.setUserState(res.data.user));\n                    console.log(res.data.project_ids)\n                    dispatch(allActions.authActions.setUserProjectIds(res.data.project_ids));\n                    userHasAuthenticated(true);\n                    setIsAuthenticating(false);\n                })\n                .catch(error => {\n                    setIsAuthenticating(false);\n                    if (error.response) {\n                        logOutUser();\n                    }\n                })\n            }\n            else {\n                setIsAuthenticating(false);\n            }\n        }      \n        onLoad();\n    }, [addToast, dispatch]);\n  \n    return (\n        <>\n            { !isAuthenticating &&\n            <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n                <BrowserRouter>\n                    <Switch>\n                        <Route path={ENUMS.ROUTES.ADMIN} render={props => <Admin {...props} isAuthenticated={isAuthenticated} />} />\n                        <Route path={ENUMS.ROUTES.AUTH} render={props => <Auth {...props} isAuthenticated={isAuthenticated} />} />\n                        {/* \n                        // TODO: remove the comments\n                        <Redirect from=\"/\" to=\"/auth/home\" /> \n                        */} \n                        <Redirect from=\"/\" to=\"/auth/login\" />\n                        <Route render={props => <NotFound {...props} />} />\n                    </Switch>\n                </BrowserRouter>\n            </AppContext.Provider>\n            }\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}