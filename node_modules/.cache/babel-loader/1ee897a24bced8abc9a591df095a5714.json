{"ast":null,"code":"var _jsxFileName = \"/Users/subodhkalika/test-projects/projects/seismos_application/client/src/views/admin/DailyLog.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport config from \"config\";\nimport axios from \"axiosConfig\";\nimport { Form, Button, Row, Col, Card, Input, DatePicker, TimePicker, Table } from 'antd';\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\nimport \"./DailyLog.css\";\nimport { useToasts } from \"react-toast-notifications\";\nimport ENUMS from \"constants/appEnums\";\nimport HttpUtil from \"util/HttpUtil\";\nimport { useHistory, useLocation } from \"react-router\";\nimport moment from \"moment\";\nimport { map } from \"underscore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DailyLog() {\n  _s();\n\n  let location = useLocation();\n  const {\n    addToast\n  } = useToasts();\n  const history = useHistory();\n  const initialFormValues = {\n    dailyLogData: [{\n      date: null,\n      time: null,\n      description: null\n    }]\n  };\n  const [dailyLogs, setDailyLogs] = useState([]);\n  const [projectId, setProjectId] = useState();\n  const [wellId, setWellId] = useState();\n\n  const onChange = (date, dateString) => {\n    console.log(date, dateString);\n  };\n\n  const columns = [{\n    title: 'Date',\n    dataIndex: 'date',\n    key: 'date'\n  }, {\n    title: 'Time',\n    dataIndex: 'time',\n    key: 'time'\n  }, {\n    title: 'Description',\n    dataIndex: 'description',\n    key: 'description'\n  }];\n\n  const onFinish = values => {\n    if (values.dailyLogData.length < 1) return;\n    const val = values.dailyLogData.map(log => {\n      return {\n        description: log.description,\n        date: Number(moment(log.date).set(\"hour\", moment(log.time).hours()).set(\"minute\", moment(log.time).minutes()).set(\"seconds\", moment(log.time).seconds()).format('x'))\n      };\n    });\n    axios.post(config.API_URL + ENUMS.API_ROUTES.DAILY_LOG, {\n      project_id: Number(projectId),\n      well_id: Number(wellId),\n      logs: val\n    }, { ...HttpUtil.adminHttpHeaders()\n    }).then(res => {\n      if (res.status === 201) {\n        fetchDailyLog(Number(wellId));\n        addToast(\"Daily logs added successfully.\", {\n          appearance: 'success',\n          autoDismiss: true\n        });\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const fetchDailyLog = well_id => {\n    axios.get(config.API_URL + ENUMS.API_ROUTES.DAILY_LOG + '/' + well_id, { ...HttpUtil.adminHttpHeaders()\n    }).then(res => {\n      if (res.status === 200 && res.data) {\n        let logs = [];\n\n        if (res.data.logs) {\n          const logs = res.data.logs.map((log, index) => {\n            return {\n              key: index,\n              date: moment(log.date).format(\"YYYY-MM-DD\"),\n              time: moment(log.date).format(\"hh : mm\"),\n              description: log.description\n            };\n          });\n          console.log(logs);\n        }\n\n        setDailyLogs(logs);\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  useEffect(() => {\n    if (location.state && location.state.projectId) {\n      setProjectId(location.state.projectId);\n      setWellId(location.state.wellId);\n      fetchDailyLog(location.state.wellId);\n    } else if (location.search) {\n      const params = new URLSearchParams(location.search);\n      const projectIdSearch = params.get('projectId');\n      const wellIdSearch = params.get('wellId');\n      setProjectId(projectIdSearch);\n      setWellId(wellIdSearch);\n      fetchDailyLog(wellIdSearch);\n    }\n  }, []);\n  useEffect(() => {\n    return history.listen(location => {\n      if (location.pathname == ENUMS.ROUTES.ADMIN + ENUMS.ROUTES.DAILY_LOG) {\n        console.log(`You changed the page to: ${location.pathname}`);\n\n        if (location.state && location.state.wellId) {\n          fetchDailyLog(location.state.wellId);\n        } else if (location.search) {\n          const params = new URLSearchParams(location.search);\n          const wellIdSearch = params.get('wellId');\n          fetchDailyLog(wellIdSearch);\n        }\n      }\n    });\n  }, [history]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      bordered: false,\n      style: {\n        width: '100%',\n        marginBottom: '5px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-580-px mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Note: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }, this), \"All times entered In tracking sheet are to be in 24 hour time format. The site layout and frac equipment info needs to be notated in the Daily log, with objectives including:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: \"disc\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"The distance from the last pump to the well (estimate) pip length \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Size of iron from pumps \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Pump types (triplex, quadplex, quinplex) \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Number of pumps \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Surface line volume \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Photographs to be collected of the equipment layout if allowed by client \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:ml-64\",\n        style: {\n          width: '650px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          gutter: 24,\n          className: \"mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 6,\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 6,\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 10,\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          name: \"dynamic_form_nest_item\",\n          onFinish: onFinish,\n          autoComplete: \"off\",\n          initialValues: initialFormValues,\n          children: [/*#__PURE__*/_jsxDEV(Form.List, {\n            name: \"dailyLogData\",\n            children: (fields, {\n              add,\n              remove\n            }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [fields.map(({\n                key,\n                name,\n                fieldKey,\n                ...restField\n              }) => /*#__PURE__*/_jsxDEV(Row, {\n                gutter: 24,\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  span: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                    name: [name, 'date'],\n                    fieldKey: [fieldKey, 'date'],\n                    rules: [{\n                      required: true,\n                      message: 'Missing date'\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                      onChange: onChange,\n                      className: \"w-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  span: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                    name: [name, 'time'],\n                    fieldKey: [fieldKey, 'time'],\n                    rules: [{\n                      required: true,\n                      message: 'Missing time'\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(TimePicker, {\n                      onChange: onChange,\n                      className: \"w-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  span: 10,\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                    name: [name, 'description'],\n                    fieldKey: [fieldKey, 'description'],\n                    rules: [{\n                      required: true,\n                      message: 'Missing description'\n                    }],\n                    className: \"w-full\",\n                    children: /*#__PURE__*/_jsxDEV(Input, {\n                      placeholder: \"Description\",\n                      className: \"w-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  span: 2,\n                  children: /*#__PURE__*/_jsxDEV(MinusCircleOutlined, {\n                    onClick: () => remove(name)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 45\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 41\n              }, this)), /*#__PURE__*/_jsxDEV(Row, {\n                gutter: 24,\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  span: 8,\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"dashed\",\n                      onClick: () => add(),\n                      block: true,\n                      icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 218,\n                        columnNumber: 59\n                      }, this),\n                      children: \"Add line\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              children: \"Submit log\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this), dailyLogs && /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-580-px mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"module-title\",\n            children: \"All Logs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          dataSource: dailyLogs,\n          columns: columns\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n\n_s(DailyLog, \"RFXw8JeSQ14/gZGeJH9r5eKkecA=\", false, function () {\n  return [useLocation, useToasts, useHistory];\n});\n\n_c = DailyLog;\n\nvar _c;\n\n$RefreshReg$(_c, \"DailyLog\");","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/views/admin/DailyLog.js"],"names":["React","useEffect","useState","config","axios","Form","Button","Row","Col","Card","Input","DatePicker","TimePicker","Table","MinusCircleOutlined","PlusOutlined","useToasts","ENUMS","HttpUtil","useHistory","useLocation","moment","map","DailyLog","location","addToast","history","initialFormValues","dailyLogData","date","time","description","dailyLogs","setDailyLogs","projectId","setProjectId","wellId","setWellId","onChange","dateString","console","log","columns","title","dataIndex","key","onFinish","values","length","val","Number","set","hours","minutes","seconds","format","post","API_URL","API_ROUTES","DAILY_LOG","project_id","well_id","logs","adminHttpHeaders","then","res","status","fetchDailyLog","appearance","autoDismiss","catch","e","get","data","index","state","search","params","URLSearchParams","projectIdSearch","wellIdSearch","listen","pathname","ROUTES","ADMIN","width","marginBottom","listStyle","fields","add","remove","name","fieldKey","restField","required","message"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport config from \"config\";\nimport axios from \"axiosConfig\";\nimport { Form, Button, Row, Col, Card, Input, DatePicker, TimePicker, Table } from 'antd';\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\nimport \"./DailyLog.css\";\nimport { useToasts } from \"react-toast-notifications\";\nimport ENUMS from \"constants/appEnums\";\nimport HttpUtil from \"util/HttpUtil\";\nimport { useHistory, useLocation } from \"react-router\";\nimport moment from \"moment\";\nimport { map } from \"underscore\";\n\nexport default function DailyLog() {\n    let location = useLocation();\n    const { addToast } = useToasts();\n    const history = useHistory();\n\n    const initialFormValues = { dailyLogData: [{ date: null, time: null, description: null }] }\n\n    const [dailyLogs, setDailyLogs] = useState([]);\n    const [projectId, setProjectId] = useState();\n    const [wellId, setWellId] = useState();\n    const onChange = (date, dateString)  => {\n        console.log(date, dateString);\n    }\n\n    const columns = [\n        {\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n        },\n        {\n            title: 'Time',\n            dataIndex: 'time',\n            key: 'time',\n        },\n        {\n            title: 'Description',\n            dataIndex: 'description',\n            key: 'description',\n        },\n    ];\n    \n    const onFinish = values => {\n        if (values.dailyLogData.length < 1)\n            return;\n        const val = values.dailyLogData.map(log => {\n            return {\n                description: log.description,\n                date: Number(moment(log.date).set(\"hour\", moment(log.time).hours()).set(\"minute\", moment(log.time).minutes()).set(\"seconds\", moment(log.time).seconds()).format('x'))\n            }\n        });\n        \n        axios.post(config.API_URL + ENUMS.API_ROUTES.DAILY_LOG,\n            {\n                project_id: Number(projectId),\n                well_id: Number(wellId),\n                logs: val\n            }, {...HttpUtil.adminHttpHeaders()})\n            .then(res => {\n                if (res.status === 201) {\n                    fetchDailyLog(Number(wellId))\n                    addToast(\"Daily logs added successfully.\", { \n                        appearance: 'success',\n                        autoDismiss: true\n                    });\n                }\n            })\n            .catch(e => {\n                console.log(e)\n            });\n    };\n\n    const fetchDailyLog = (well_id) => {\n        axios.get(config.API_URL + ENUMS.API_ROUTES.DAILY_LOG + '/' + well_id,\n            {\n                ...HttpUtil.adminHttpHeaders(),\n            })\n            .then(res => {\n                if (res.status === 200 && res.data) {\n                    let logs = [];\n                    if (res.data.logs) {\n                        const logs = res.data.logs.map((log, index) => {\n                            return {\n                                key: index,\n                                date: moment(log.date).format(\"YYYY-MM-DD\"),\n                                time: moment(log.date).format(\"hh : mm\"),\n                                description: log.description,\n                            }\n                        })\n                        console.log(logs)\n                    }\n                    setDailyLogs(logs);\n                }\n            })\n            .catch(e => {\n                console.log(e)\n            })\n    }\n\n    useEffect(() => {\n        if (location.state && location.state.projectId) {\n            setProjectId(location.state.projectId);\n            setWellId(location.state.wellId);\n            fetchDailyLog(location.state.wellId)\n        }\n        else if (location.search) {\n            const params = new URLSearchParams(location.search);\n            const projectIdSearch = params.get('projectId');\n            const wellIdSearch = params.get('wellId');\n            setProjectId(projectIdSearch);\n            setWellId(wellIdSearch);\n            fetchDailyLog(wellIdSearch);\n        }\n    }, [])\n\n    useEffect(() => {\n        return history.listen((location) => { \n            if(location.pathname == (ENUMS.ROUTES.ADMIN + ENUMS.ROUTES.DAILY_LOG)) {\n                console.log(`You changed the page to: ${location.pathname}`) \n                if (location.state && location.state.wellId) {\n                    fetchDailyLog(location.state.wellId);\n                }\n                else if (location.search) {\n                    const params = new URLSearchParams(location.search);\n                    const wellIdSearch = params.get('wellId');\n                    fetchDailyLog(wellIdSearch)\n                }\n            }\n        }) \n    }, [history])\n\n      \n    return (\n        <>\n            <Card bordered={false} style={{ width: '100%', marginBottom: '5px' }}>\n                <div className=\"max-w-580-px mx-auto\">\n                        <strong>Note: </strong>\n                         All times entered In tracking sheet are to be in 24 hour time format. The site layout and frac equipment info needs to be notated in the Daily log, with objectives including: \n                        <br></br>\n                        <br></br>\n                        <ul style={{listStyle: \"disc\"}}>\n                            <li>The distance from the last pump to the well (estimate) pip length </li>\n                            <li>Size of iron from pumps </li>\n                            <li>Pump types (triplex, quadplex, quinplex) </li>\n                            <li>Number of pumps </li>\n                            <li>Surface line volume </li>\n                            <li>Photographs to be collected of the equipment layout if allowed by client </li>\n                        </ul>\n                </div>\n            </Card>\n            <Card>\n                {/* <div className=\"text-right\">\n                    <Button type=\"primary\" >Submit log</Button>\n                </div> */}\n                <div className=\"md:ml-64\" style={{width: '650px'}}>\n                    <Row gutter={24} className=\"mb-2\">\n                        <Col span={6}><strong>Date</strong></Col>\n                        <Col span={6}><strong>Time</strong></Col>\n                        <Col span={10}><strong>Description</strong></Col>\n                    </Row>\n                    <Form\n                        name=\"dynamic_form_nest_item\"\n                        onFinish={onFinish}\n                        autoComplete=\"off\"\n                        initialValues={initialFormValues}\n                    >\n                        <Form.List name=\"dailyLogData\">\n                            {(fields, { add, remove }) => (\n                                <>\n                                    {fields.map(({ key, name, fieldKey, ...restField }) => (\n                                        <Row gutter={24} key={key}>\n                                            <Col span={6}>\n                                                <Form.Item\n                                                    {...restField}\n                                                    name={[name, 'date']}\n                                                    fieldKey={[fieldKey, 'date']}\n                                                    rules={[{ required: true, message: 'Missing date' }]}\n                                                >\n                                                    <DatePicker onChange={onChange} className=\"w-full\"/>\n                                                </Form.Item>\n                                            </Col>\n                                            <Col span={6}>\n                                                <Form.Item\n                                                    {...restField}\n                                                    name={[name, 'time']}\n                                                    fieldKey={[fieldKey, 'time']}\n                                                    rules={[{ required: true, message: 'Missing time' }]}\n                                                >\n                                                    <TimePicker onChange={onChange} className=\"w-full\"/>\n                                                </Form.Item>\n                                            </Col>\n                                            <Col span={10}>\n                                                <Form.Item\n                                                    {...restField}\n                                                    name={[name, 'description']}\n                                                    fieldKey={[fieldKey, 'description']}\n                                                    rules={[{ required: true, message: 'Missing description' }]}\n                                                    className=\"w-full\"\n                                                >\n                                                    <Input placeholder=\"Description\" className=\"w-full\"/>\n                                                </Form.Item>\n                                            </Col>\n                                            <Col span={2}>\n                                                <MinusCircleOutlined onClick={() => remove(name)} />\n                                            </Col>\n                                        </Row>\n                                    ))}\n                                    <Row gutter={24}>\n                                        <Col span={8}>\n                                            <Form.Item>\n                                                <Button\n                                                    type=\"dashed\"\n                                                    onClick={() => add()}\n                                                    block\n                                                    icon={<PlusOutlined />}\n                                                >\n                                                    Add line\n                                                </Button>\n                                            </Form.Item>\n                                        </Col>\n                                    </Row>\n                                    \n                                </>\n                            )}\n                        </Form.List>\n                        <Form.Item>\n                            <Button type=\"primary\" htmlType=\"submit\">\n                                Submit log\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Card>\n            {\n                dailyLogs && \n                <Card>\n                    <div className=\"max-w-580-px mx-auto\">\n                        <div><h2 className=\"module-title\">All Logs</h2></div>\n                        <Table dataSource={dailyLogs} columns={columns} />\n                        {/* <Row gutter={24} className=\"mb-2\">\n                                    <Col span={5}><strong>Date</strong></Col>\n                                    <Col span={5}><strong>Time</strong></Col>\n                                    <Col span={14}><strong>Description</strong></Col>\n                                </Row>\n                        {dailyLogs.map(log => {\n                            return <>\n                                \n                                <Row gutter={24} className=\"mb-2\">\n                                    <Col span={5}>{moment(log.date).format(\"YYYY-MM-DD\")}</Col>\n                                    <Col span={5}>{moment(log.date).format(\"hh : mm\")}</Col>\n                                    <Col span={14}>{log.description}</Col>\n                                </Row>\n                            </>\n                        })} */}\n                    </div>\n                </Card>\n            }\n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}