{"ast":null,"code":"var _jsxFileName = \"/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js\",\n    _s2 = $RefreshSig$();\n\nimport Auth from \"layouts/Auth.js\";\nimport HttpUtil from \"util/HttpUtil\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport axios from \"axiosConfig\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Application() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  useEffect(_s(() => {\n    _s();\n\n    const dispatch = useDispatch();\n    const {\n      addToast\n    } = useToasts();\n\n    const onLoad = async () => {\n      if (localStorage.getItem('JWT')) {\n        console.log('in side jwt token');\n        axios.get(ENUMS.API_ROUTES.AUTH_STATUS, { ...HttpUtil.adminHttpHeaders()\n        }).then(res => {\n          dispatch(allActions.authActions.setUserState(res.data.user));\n          dispatch(allActions.authActions.setUserProjectList(res.data.projectList));\n          userHasAuthenticated(true);\n          setIsAuthenticating(false);\n        }).catch(error => {\n          userHasAuthenticated(false);\n          setIsAuthenticating(false);\n\n          if (error.response) {\n            if (error.response.data && error.response.data.message === 'jwt expired') {\n              localStorage.removeItem('JWT');\n              addToast(\"Your login token has expired. Please login again!\", {\n                appearance: 'info'\n              });\n              console.error(error.response.data.message);\n            } else {// addToast(\n              //     error.response.data ? \n              //         error.response.data.message : \n              //         \"Failed to fetch user details. Please login again!\", \n              //     { \n              //         appearance: 'error',\n              //         autoDismiss: true\n              //     }\n              // );\n            }\n          }\n        });\n      } else {\n        setIsAuthenticating(false);\n      }\n    };\n\n    onLoad();\n  }, \"ZZNdUQ+LHvG+Wvtq1ULY7joK/as=\", false, function () {\n    return [useDispatch, useToasts];\n  }), []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !isAuthenticating && /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        isAuthenticated,\n        userHasAuthenticated\n      },\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.ADMIN,\n            render: props => /*#__PURE__*/_jsxDEV(Admin, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: ENUMS.ROUTES.AUTH,\n            render: props => /*#__PURE__*/_jsxDEV(Auth, { ...props,\n              isAuthenticated: isAuthenticated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n            from: \"/\",\n            to: \"/auth/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            render: props => /*#__PURE__*/_jsxDEV(NotFound, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s2(Application, \"/JZwhilIECe+xjPAAylf2TmxR5Q=\");\n\n_c = Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/app.js"],"names":["Auth","HttpUtil","Admin","ENUMS","useDispatch","allActions","AppContext","React","useState","useEffect","NotFound","useToasts","BrowserRouter","Route","Switch","Redirect","axios","Application","isAuthenticated","userHasAuthenticated","isAuthenticating","setIsAuthenticating","dispatch","addToast","onLoad","localStorage","getItem","console","log","get","API_ROUTES","AUTH_STATUS","adminHttpHeaders","then","res","authActions","setUserState","data","user","setUserProjectList","projectList","catch","error","response","message","removeItem","appearance","ROUTES","ADMIN","props","AUTH"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,aAAT,EAAwBC,KAAxB,EAA+BC,MAA/B,EAAuCC,QAAvC,QAAuD,kBAAvD;AACA,OAAOC,KAAP,MAAkB,aAAlB;;;AAEA,eAAe,SAASC,WAAT,GAAwB;AAAA;;AAAA;;AACnC,QAAM,CAACC,eAAD,EAAkBC,oBAAlB,IAA0CX,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAACY,gBAAD,EAAmBC,mBAAnB,IAA0Cb,QAAQ,CAAC,IAAD,CAAxD;AAEAC,EAAAA,SAAS,IAAC,MAAM;AAAA;;AACZ,UAAMa,QAAQ,GAAGlB,WAAW,EAA5B;AACA,UAAM;AAAEmB,MAAAA;AAAF,QAAeZ,SAAS,EAA9B;;AACA,UAAMa,MAAM,GAAG,YAAY;AACvB,UAAIC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAJ,EAAiC;AAC7BC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAZ,QAAAA,KAAK,CAACa,GAAN,CAAU1B,KAAK,CAAC2B,UAAN,CAAiBC,WAA3B,EACA,EACI,GAAG9B,QAAQ,CAAC+B,gBAAT;AADP,SADA,EAICC,IAJD,CAIMC,GAAG,IAAI;AACTZ,UAAAA,QAAQ,CAACjB,UAAU,CAAC8B,WAAX,CAAuBC,YAAvB,CAAoCF,GAAG,CAACG,IAAJ,CAASC,IAA7C,CAAD,CAAR;AACAhB,UAAAA,QAAQ,CAACjB,UAAU,CAAC8B,WAAX,CAAuBI,kBAAvB,CAA0CL,GAAG,CAACG,IAAJ,CAASG,WAAnD,CAAD,CAAR;AACArB,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACH,SATD,EAUCoB,KAVD,CAUOC,KAAK,IAAI;AACZvB,UAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAE,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;;AACA,cAAIqB,KAAK,CAACC,QAAV,EAAoB;AAChB,gBAAID,KAAK,CAACC,QAAN,CAAeN,IAAf,IAAuBK,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAApB,KAAgC,aAA3D,EAA0E;AACtEnB,cAAAA,YAAY,CAACoB,UAAb,CAAwB,KAAxB;AACAtB,cAAAA,QAAQ,CAAC,mDAAD,EAAsD;AAAEuB,gBAAAA,UAAU,EAAE;AAAd,eAAtD,CAAR;AACAnB,cAAAA,OAAO,CAACe,KAAR,CAAcA,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAAlC;AACH,aAJD,MAKK,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAEJ;AACJ,SAhCD;AAiCH,OAnCD,MAoCK;AACDvB,QAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACH;AACJ,KAxCD;;AAyCAG,IAAAA,MAAM;AACT,GA7CQ;AAAA,YACYpB,WADZ,EAEgBO,SAFhB;AAAA,MA6CN,EA7CM,CAAT;AA+CA,sBACI;AAAA,cACM,CAACS,gBAAD,iBACF,QAAC,UAAD,CAAY,QAAZ;AAAqB,MAAA,KAAK,EAAE;AAAEF,QAAAA,eAAF;AAAmBC,QAAAA;AAAnB,OAA5B;AAAA,6BACI,QAAC,aAAD;AAAA,+BACI,QAAC,MAAD;AAAA,kCACI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAEhB,KAAK,CAAC4C,MAAN,CAAaC,KAA1B;AAAiC,YAAA,MAAM,EAAEC,KAAK,iBAAI,QAAC,KAAD,OAAWA,KAAX;AAAkB,cAAA,eAAe,EAAE/B;AAAnC;AAAA;AAAA;AAAA;AAAA;AAAlD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAEf,KAAK,CAAC4C,MAAN,CAAaG,IAA1B;AAAgC,YAAA,MAAM,EAAED,KAAK,iBAAI,QAAC,IAAD,OAAUA,KAAV;AAAiB,cAAA,eAAe,EAAE/B;AAAlC;AAAA;AAAA;AAAA;AAAA;AAAjD;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAII,QAAC,QAAD;AAAU,YAAA,IAAI,EAAC,GAAf;AAAmB,YAAA,EAAE,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI,QAAC,KAAD;AAAO,YAAA,MAAM,EAAE+B,KAAK,iBAAI,QAAC,QAAD,OAAcA;AAAd;AAAA;AAAA;AAAA;AAAA;AAAxB;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFJ,mBADJ;AAiBH;;IApEuBhC,W;;KAAAA,W","sourcesContent":["import Auth from \"layouts/Auth.js\";\nimport HttpUtil from \"util/HttpUtil\";\nimport Admin from \"layouts/Admin.js\";\nimport ENUMS from \"constants/appEnums\";\nimport { useDispatch } from \"react-redux\";\nimport allActions from 'redux/actions/index';\nimport { AppContext } from \"util/ContextUtil\";\nimport React, { useState, useEffect } from \"react\";\nimport NotFound from \"components/NotFound/NotFound\";\nimport { useToasts } from 'react-toast-notifications';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport axios from \"axiosConfig\";\n\nexport default function Application () {\n    const [isAuthenticated, userHasAuthenticated] = useState(false);\n    const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n    useEffect(() => {\n        const dispatch = useDispatch();\n        const { addToast } = useToasts();\n        const onLoad = async () => {\n            if (localStorage.getItem('JWT')) {\n                console.log('in side jwt token');\n                axios.get(ENUMS.API_ROUTES.AUTH_STATUS,\n                {\n                    ...HttpUtil.adminHttpHeaders()\n                })\n                .then(res => {\n                    dispatch(allActions.authActions.setUserState(res.data.user));\n                    dispatch(allActions.authActions.setUserProjectList(res.data.projectList));\n                    userHasAuthenticated(true);\n                    setIsAuthenticating(false);\n                })\n                .catch(error => {\n                    userHasAuthenticated(false);\n                    setIsAuthenticating(false);\n                    if (error.response) {\n                        if (error.response.data && error.response.data.message === 'jwt expired') {\n                            localStorage.removeItem('JWT');\n                            addToast(\"Your login token has expired. Please login again!\", { appearance: 'info' });\n                            console.error(error.response.data.message);\n                        }\n                        else {\n                            // addToast(\n                            //     error.response.data ? \n                            //         error.response.data.message : \n                            //         \"Failed to fetch user details. Please login again!\", \n                            //     { \n                            //         appearance: 'error',\n                            //         autoDismiss: true\n                            //     }\n                            // );\n                        }\n                        \n                    }\n                })\n            }\n            else {\n                setIsAuthenticating(false);\n            }\n        }      \n        onLoad();\n    }, []);\n  \n    return (\n        <>\n            { !isAuthenticating &&\n            <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n                <BrowserRouter>\n                    <Switch>\n                        <Route path={ENUMS.ROUTES.ADMIN} render={props => <Admin {...props} isAuthenticated={isAuthenticated} />} />\n                        <Route path={ENUMS.ROUTES.AUTH} render={props => <Auth {...props} isAuthenticated={isAuthenticated} />} />\n                        {/* <Redirect from=\"/\" to=\"/auth/home\" /> */}\n                        <Redirect from=\"/\" to=\"/auth/login\" />\n                        <Route render={props => <NotFound {...props} />} />\n                    </Switch>\n                </BrowserRouter>\n            </AppContext.Provider>\n            }\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}