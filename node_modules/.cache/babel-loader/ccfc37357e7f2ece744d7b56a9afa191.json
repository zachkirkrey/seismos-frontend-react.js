{"ast":null,"code":"import _slicedToArray from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axiosConfig\";import config from\"config\";import ENUMS from\"constants/appEnums\";import React,{useState}from\"react\";import{useForm}from\"react-hook-form\";import allActions from'redux/actions/index';import{useAppContext}from\"util/ContextUtil\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{Form,Input,Card,Divider,Button,Checkbox,Row,Col}from'antd';import{UserOutlined,LockOutlined}from'@ant-design/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var history=useHistory();var location=useLocation();var dispatch=useDispatch();var _useForm=useForm({}),handleSubmit=_useForm.handleSubmit;var _useAppContext=useAppContext(),userHasAuthenticated=_useAppContext.userHasAuthenticated;// state variables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];/**\n     * Method to make API call for user login\n     */var handleLogin=function handleLogin(){// TODO: Remove fake call and data\nsaveUserState({token:'test-token',user:{first_name:'Test',last_name:'user'},project:null});// TODO ENDS : Remove fake call and data\naxios.post(config.API_URL+ENUMS.API_ROUTES.AUTH_LOGIN,{email:email,password:password}).then(function(res){console.log(res);if(res.status===200&&res.data.success){saveUserState(res.data);}}).catch(function(e){console.log(e);});};/**\n     * Method to save user data in redux store and set local storage with JWT\n     * @param {Object} data \n     */var saveUserState=function saveUserState(data){localStorage.setItem('JWT',data.token);userHasAuthenticated(true);dispatch(allActions.authActions.setUserState(data.user));dispatch(allActions.authActions.setUserProject(data.project));if(location&&location.state&&location.state.from){history.push({pathname:location.state.from.pathname,search:location.state.from.search,state:location.state.from.state});}else{history.push('/admin/project');}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 h-full login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex content-center items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full lg:w-4/12 px-4\",children:[/*#__PURE__*/_jsx(Card,{className:\"text-center login-header-card\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"seismos logo\",className:\"mx-auto\",src:require(\"assets/img/seismos/seismos_logo_animated.gif\").default})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-blueGray-500 text-sm text-center\",children:\"Log in to Seismos\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:handleLogin,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",rules:[{required:true,message:'Please input your Username!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Username\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(Row,{gutter:24,className:\"mb-6\",children:/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"remember\",noStyle:true,children:/*#__PURE__*/_jsx(Checkbox,{children:\"Remember me\"})})})}),/*#__PURE__*/_jsx(Form.Item,{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"w-full login-form-button\",children:\"Log in\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap mt-2 relative justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#pablo\",onClick:function onClick(e){return e.preventDefault();},className:\"text-seismos-primary\",children:\"Forgot password?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 text-right\",children:/*#__PURE__*/_jsx(Link,{to:\"/auth/register\",className:\"block text-seismos-primary\",children:\"Create new account\"})})]})]})})})});}","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/views/auth/Login.js"],"names":["axios","config","ENUMS","React","useState","useForm","allActions","useAppContext","Link","useHistory","useLocation","useDispatch","Form","Input","Card","Divider","Button","Checkbox","Row","Col","UserOutlined","LockOutlined","Login","history","location","dispatch","handleSubmit","userHasAuthenticated","email","setEmail","password","setPassword","handleLogin","saveUserState","token","user","first_name","last_name","project","post","API_URL","API_ROUTES","AUTH_LOGIN","then","res","console","log","status","data","success","catch","e","localStorage","setItem","authActions","setUserState","setUserProject","state","from","push","pathname","search","require","default","remember","required","message","preventDefault"],"mappings":"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","sourcesContent":["import axios from \"axiosConfig\";\nimport config from \"config\";\nimport ENUMS from \"constants/appEnums\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport allActions from 'redux/actions/index';\nimport { useAppContext } from \"util/ContextUtil\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { Form, Input, Card, Divider, Button, Checkbox, Row, Col } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\n\nexport default function Login() {\n    let history = useHistory();\n    let location = useLocation();\n    const dispatch = useDispatch();\n    const { handleSubmit } = useForm({});\n    const { userHasAuthenticated } = useAppContext();\n\n    // state variables\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    /**\n     * Method to make API call for user login\n     */\n    const handleLogin = () => {\n        // TODO: Remove fake call and data\n        saveUserState({\n            token: 'test-token',\n            user: {\n                first_name: 'Test',\n                last_name: 'user'\n            },\n            project: null\n        })\n        // TODO ENDS : Remove fake call and data\n        axios.post(config.API_URL + ENUMS.API_ROUTES.AUTH_LOGIN,\n            {\n                email: email,\n                password: password\n            })\n            .then(res => {\n                console.log(res);\n                if (res.status === 200 && res.data.success) {\n                    saveUserState(res.data);\n                }\n            })\n            .catch(e => {\n                console.log(e)\n            });\n    }\n\n    /**\n     * Method to save user data in redux store and set local storage with JWT\n     * @param {Object} data \n     */\n    const saveUserState = (data) => {\n        localStorage.setItem('JWT', data.token);\n        userHasAuthenticated(true);\n        dispatch(allActions.authActions.setUserState(data.user));\n        dispatch(allActions.authActions.setUserProject(data.project));\n\n        if (location && location.state && location.state.from) {\n            history.push({\n                pathname: location.state.from.pathname,\n                search: location.state.from.search,\n                state: location.state.from.state\n            });\n        } else {\n            history.push('/admin/project');\n        }\n    }\n\n    return (\n        <>\n            <div className=\"container mx-auto px-4 h-full login-container\">\n                <div className=\"flex content-center items-center justify-center h-full\">\n                    <div className=\"w-full lg:w-4/12 px-4\">\n                        <Card className=\"text-center login-header-card\">\n                            <img alt=\"seismos logo\" className=\"mx-auto\" src={require(\"assets/img/seismos/seismos_logo_animated.gif\").default}></img>\n                        </Card>\n                        <Card>\n                            <h6 className=\"text-blueGray-500 text-sm text-center\">\n                                Log in to Seismos\n                            </h6>\n                            <Divider></Divider>\n                            <Form\n                                name=\"normal_login\"\n                                className=\"login-form\"\n                                initialValues={{\n                                    remember: true,\n                                }}\n                                onFinish={handleLogin}\n                                >\n                                <Form.Item\n                                    name=\"username\"\n                                    rules={[\n                                    {\n                                        required: true,\n                                        message: 'Please input your Username!',\n                                    },\n                                    ]}\n                                >\n                                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\n                                </Form.Item>\n                                <Form.Item\n                                    name=\"password\"\n                                    rules={[\n                                    {\n                                        required: true,\n                                        message: 'Please input your Password!',\n                                    },\n                                    ]}\n                                >\n                                    <Input\n                                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                                    type=\"password\"\n                                    placeholder=\"Password\"\n                                    />\n                                </Form.Item>\n                                <Row gutter={24} className=\"mb-6\">\n                                    <Col span={12}>\n                                        <Form.Item name=\"remember\" noStyle>\n                                            <Checkbox>Remember me</Checkbox>\n                                        </Form.Item>\n                                    </Col>\n                                    \n                                </Row>\n\n                                <Form.Item className=\"text-center\">\n                                    <Button type=\"primary\" htmlType=\"submit\" className=\"w-full login-form-button\">\n                                    Log in\n                                    </Button>\n                                    \n                                    \n                                </Form.Item>\n                            </Form>\n                        </Card>\n                        <div className=\"flex flex-wrap mt-2 relative justify-between\">\n                            <div className=\"w-1/2\">\n                                <a\n                                    href=\"#pablo\"\n                                    onClick={(e) => e.preventDefault()}\n                                    className=\"text-seismos-primary\"\n                                >\n                                    Forgot password?\n                                </a>\n                            </div>\n                            <div className=\"w-1/2 text-right\">\n                                <Link to=\"/auth/register\" className=\"block text-seismos-primary\">\n                                    Create new account\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}