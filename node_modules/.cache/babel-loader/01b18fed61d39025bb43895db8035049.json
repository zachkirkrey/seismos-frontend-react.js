{"ast":null,"code":"import _objectSpread from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axiosConfig\";import config from\"config\";import ENUMS from\"constants/appEnums\";import React,{useState}from\"react\";import allActions from'redux/actions/index';import{useAppContext}from\"util/ContextUtil\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{Form,Input,Card,Divider,Button,Row,Col,Spin}from'antd';import{UserOutlined,LockOutlined}from'@ant-design/icons';import{useToasts}from\"react-toast-notifications\";import HttpUtil from\"util/HttpUtil\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var history=useHistory();var location=useLocation();var _useToasts=useToasts(),addToast=_useToasts.addToast;var dispatch=useDispatch();var _useAppContext=useAppContext(),userHasAuthenticated=_useAppContext.userHasAuthenticated;//loader\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];/**\n     * Method to make API call for user login\n     */var handleLogin=function handleLogin(data){setIsLoading(true);axios.post(config.API_URL+ENUMS.API_ROUTES.AUTH_LOGIN,{username:data.username,password:data.password},_objectSpread({},HttpUtil.authHttpHeaders)).then(function(res){setIsLoading(false);if(res.status===200&&res.data){saveUserState(res.data.data);}}).catch(function(e){setIsLoading(false);if(e.response.status===401){addToast(\"Incorrect username or password!\",{appearance:'error',autoDismiss:true});}});};/**\n     * Method to save user data in redux store and set local storage with JWT\n     * @param {Object} data \n     */var saveUserState=function saveUserState(data){console.log(data);localStorage.setItem('JWT',data.access_token);userHasAuthenticated(true);dispatch(allActions.authActions.setUserState(data.user));dispatch(allActions.authActions.setUserProjectIds(data.project_ids));if(location&&location.state&&location.state.from){history.push({pathname:location.state.from.pathname,search:location.state.from.search,state:location.state.from.state});}else{history.push(ENUMS.ROUTES.ADMIN+ENUMS.ROUTES.PROJECT);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 h-full login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex content-center items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full lg:w-4/12 px-4\",children:[/*#__PURE__*/_jsx(Card,{className:\"text-center login-header-card\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"seismos logo\",className:\"mx-auto\",src:require(\"assets/img/seismos/seismos_logo_animated.gif\").default})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-blueGray-500 text-sm text-center\",children:\"Log in to Seismos\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:handleLogin,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",rules:[{required:true,message:'Please input your Username!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Username\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(Row,{gutter:24,className:\"mb-6\",children:/*#__PURE__*/_jsx(Col,{span:12})}),/*#__PURE__*/_jsx(Form.Item,{className:\"text-center\",children:isLoading?/*#__PURE__*/_jsx(Spin,{}):/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"w-full login-form-button\",children:\"Log in\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap mt-2 relative justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#pablo\",onClick:function onClick(e){return e.preventDefault();},className:\"text-seismos-primary\",children:\"Forgot password?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 text-right\",children:/*#__PURE__*/_jsx(Link,{to:\"/auth/register\",className:\"block text-seismos-primary\",children:\"Create new account\"})})]})]})})})});}","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/views/auth/Login.js"],"names":["axios","config","ENUMS","React","useState","allActions","useAppContext","Link","useHistory","useLocation","useDispatch","Form","Input","Card","Divider","Button","Row","Col","Spin","UserOutlined","LockOutlined","useToasts","HttpUtil","Login","history","location","addToast","dispatch","userHasAuthenticated","isLoading","setIsLoading","handleLogin","data","post","API_URL","API_ROUTES","AUTH_LOGIN","username","password","authHttpHeaders","then","res","status","saveUserState","catch","e","response","appearance","autoDismiss","console","log","localStorage","setItem","access_token","authActions","setUserState","user","setUserProjectIds","project_ids","state","from","push","pathname","search","ROUTES","ADMIN","PROJECT","require","default","remember","required","message","preventDefault"],"mappings":"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","sourcesContent":["import axios from \"axiosConfig\";\nimport config from \"config\";\nimport ENUMS from \"constants/appEnums\";\nimport React, { useState } from \"react\";\nimport allActions from 'redux/actions/index';\nimport { useAppContext } from \"util/ContextUtil\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { Form, Input, Card, Divider, Button, Row, Col, Spin } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { useToasts } from \"react-toast-notifications\";\nimport HttpUtil from \"util/HttpUtil\";\n\nexport default function Login() {\n    let history = useHistory();\n    let location = useLocation();\n    const { addToast } = useToasts();\n    const dispatch = useDispatch();\n    const { userHasAuthenticated } = useAppContext();\n\n    //loader\n    const [isLoading, setIsLoading] = useState(false);\n\n    /**\n     * Method to make API call for user login\n     */\n    const handleLogin = (data) => {\n        setIsLoading(true);\n        axios.post(config.API_URL + ENUMS.API_ROUTES.AUTH_LOGIN,\n            {\n                username: data.username,\n                password: data.password\n            }, {...HttpUtil.authHttpHeaders})\n            .then(res => {\n                setIsLoading(false);\n                if (res.status === 200 && res.data) {\n                    saveUserState(res.data.data);\n                }\n            })\n            .catch(e => {\n                setIsLoading(false);\n                if(e.response.status === 401) {\n                    addToast(\"Incorrect username or password!\", { appearance: 'error', autoDismiss: true });\n                }\n            });\n    }\n\n    /**\n     * Method to save user data in redux store and set local storage with JWT\n     * @param {Object} data \n     */\n    const saveUserState = (data) => {\n        console.log(data)\n        localStorage.setItem('JWT', data.access_token);\n        userHasAuthenticated(true);\n        dispatch(allActions.authActions.setUserState(data.user));\n        dispatch(allActions.authActions.setUserProjectIds(data.project_ids));\n\n        if (location && location.state && location.state.from) {\n            history.push({\n                pathname: location.state.from.pathname,\n                search: location.state.from.search,\n                state: location.state.from.state\n            });\n        } else {\n            history.push(ENUMS.ROUTES.ADMIN + ENUMS.ROUTES.PROJECT);\n        }\n    }\n\n    return (\n        <>\n            <div className=\"container mx-auto px-4 h-full login-container\">\n                <div className=\"flex content-center items-center justify-center h-full\">\n                    <div className=\"w-full lg:w-4/12 px-4\">\n                        <Card className=\"text-center login-header-card\">\n                            <img alt=\"seismos logo\" className=\"mx-auto\" src={require(\"assets/img/seismos/seismos_logo_animated.gif\").default}></img>\n                        </Card>\n                        <Card>\n                            <h6 className=\"text-blueGray-500 text-sm text-center\">\n                                Log in to Seismos\n                            </h6>\n                            <Divider></Divider>\n                            <Form\n                                name=\"normal_login\"\n                                className=\"login-form\"\n                                initialValues={{\n                                    remember: true,\n                                }}\n                                onFinish={handleLogin}\n                                >\n                                <Form.Item\n                                    name=\"username\"\n                                    rules={[\n                                    {\n                                        required: true,\n                                        message: 'Please input your Username!',\n                                    },\n                                    ]}\n                                >\n                                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\n                                </Form.Item>\n                                <Form.Item\n                                    name=\"password\"\n                                    rules={[\n                                    {\n                                        required: true,\n                                        message: 'Please input your Password!',\n                                    },\n                                    ]}\n                                >\n                                    <Input\n                                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                                    type=\"password\"\n                                    placeholder=\"Password\"\n                                    />\n                                </Form.Item>\n                                <Row gutter={24} className=\"mb-6\">\n                                    <Col span={12}>\n                                        {/* <Form.Item name=\"remember\" noStyle>\n                                            <Checkbox>Remember me</Checkbox>\n                                        </Form.Item> */}\n                                    </Col>\n                                    \n                                </Row>\n\n                                <Form.Item className=\"text-center\">\n                                    {\n                                        isLoading ? \n                                        <Spin />\n                                        : <Button type=\"primary\" htmlType=\"submit\" className=\"w-full login-form-button\">\n                                                Log in\n                                        </Button>\n                                    }\n                                </Form.Item>\n                            </Form>\n                        </Card>\n                        <div className=\"flex flex-wrap mt-2 relative justify-between\">\n                            <div className=\"w-1/2\">\n                                <a\n                                    href=\"#pablo\"\n                                    onClick={(e) => e.preventDefault()}\n                                    className=\"text-seismos-primary\"\n                                >\n                                    Forgot password?\n                                </a>\n                            </div>\n                            <div className=\"w-1/2 text-right\">\n                                <Link to=\"/auth/register\" className=\"block text-seismos-primary\">\n                                    Create new account\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}