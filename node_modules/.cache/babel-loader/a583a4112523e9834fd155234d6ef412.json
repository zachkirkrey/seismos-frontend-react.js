{"ast":null,"code":"import _toConsumableArray from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/subodhkalika/test-projects/projects/seismos_application/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import ReactDataSheet from\"react-datasheet\";import\"react-datasheet/lib/react-datasheet.css\";import\"./Grid.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SheetRenderer=function SheetRenderer(props){var className=props.className,columns=props.columns;return/*#__PURE__*/_jsxs(\"table\",{className:className+\" seismos-spreadsheet-grid\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(function(col,index){return/*#__PURE__*/_jsx(\"th\",{className:\"cell \".concat(className,\" \").concat(col.className),style:{width:col.width,background:\"#f9f9f9\",padding:\"10px 20px\"},colSpan:col.colSpan?col.colSpan:1,children:col.label},index);})})}),/*#__PURE__*/_jsx(\"tbody\",{children:props.children})]});};// TODO: REMOVE\n// const CellRenderer = props => {\n//     const { children } = props;\n//     return (\n//         <td className=\"cell\" style={{ textAlign: \"center\" }}>\n//             {children}\n//         </td>\n//     );\n// };\nexport default function Grid(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),columns=_useState2[0],setColumns=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),grid=_useState4[0],setGrid=_useState4[1];var renderSheet=function renderSheet(sheetProps){return/*#__PURE__*/_jsx(SheetRenderer,_objectSpread({columns:columns},sheetProps));};// TODO: REMOVE\n// const renderRow = (rowProps) => {\n//     const { row, cells, ...rest } = rowProps;\n//     return <CellRenderer rowIndex={row} {...rest} />;\n// }\nuseEffect(function(){setColumns(props.columns);setGrid(props.grid);},[props]);return/*#__PURE__*/_jsx(\"div\",{style:{width:props.width?props.width:\"100%\"},children:grid&&/*#__PURE__*/_jsx(ReactDataSheet,{data:grid,valueRenderer:function valueRenderer(cell){return cell.value;},sheetRenderer:renderSheet,className:props.className,isCellNavigable:function isCellNavigable(cell,row,col){return!cell.disableEvents?true:false;}// cellRenderer={renderRow}\n,onCellsChanged:function onCellsChanged(changes){var gridData=grid.map(function(row){return _toConsumableArray(row);});changes.forEach(function(_ref){var cell=_ref.cell,row=_ref.row,col=_ref.col,value=_ref.value;console.log({cell:cell,row:row,col:col,value:value});var error=false;var className=cell.className;if(gridData[row][col]['required']&&value===\"\"){error=true;className=className+'cell-error';}else{className=className?className.replace(\"cell-error\",\"\"):'null';}gridData[row][col]=_objectSpread(_objectSpread({},gridData[row][col]),{},{value:value,error:error,className:className});});setGrid(gridData);props.hasOwnProperty('gridValueChanged')&&props.gridValueChanged(gridData,props.index);}})});}","map":{"version":3,"sources":["/Users/subodhkalika/test-projects/projects/seismos_application/client/src/components/Grid/Grid.js"],"names":["React","useEffect","useState","ReactDataSheet","SheetRenderer","props","className","columns","map","col","index","width","background","padding","colSpan","label","children","Grid","setColumns","grid","setGrid","renderSheet","sheetProps","cell","value","row","disableEvents","changes","gridData","forEach","console","log","error","replace","hasOwnProperty","gridValueChanged"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ReactDataSheet from \"react-datasheet\";\nimport \"react-datasheet/lib/react-datasheet.css\";\nimport \"./Grid.css\";\n\nconst SheetRenderer = props => {\n    const { className, columns } = props;\n    return (\n        <table className={className + \" seismos-spreadsheet-grid\"}>\n            <thead>\n                <tr>\n                {columns.map((col, index) => (\n                    <th\n                        key={index}\n                        className={`cell ${className} ${col.className}`}\n                        style={{\n                            width: col.width,\n                            background: \"#f9f9f9\",\n                            padding: \"10px 20px\",\n                        }}\n                        colSpan={col.colSpan ? col.colSpan : 1}\n                    >\n                        {col.label}\n                    </th>\n                ))}\n                </tr>\n            </thead>\n            <tbody>{props.children}</tbody>\n        </table>\n    );\n};\n\n// TODO: REMOVE\n// const CellRenderer = props => {\n//     const { children } = props;\n\n//     return (\n//         <td className=\"cell\" style={{ textAlign: \"center\" }}>\n//             {children}\n//         </td>\n//     );\n// };\n\nexport default function Grid(props) {\n\n    const [columns, setColumns] = useState();\n    const [grid, setGrid] = useState();\n\n    const renderSheet = (sheetProps) => {\n        return <SheetRenderer columns={columns} {...sheetProps} />;\n    }\n\n    // TODO: REMOVE\n    // const renderRow = (rowProps) => {\n    //     const { row, cells, ...rest } = rowProps;\n    //     return <CellRenderer rowIndex={row} {...rest} />;\n    // }\n\n    useEffect(() => {\n        setColumns(props.columns);\n        setGrid(props.grid);\n    }, [props]);\n\n    return (\n        <div style={{ width: props.width ? props.width : \"100%\" }}>\n            {grid && <ReactDataSheet\n                data={grid}\n                valueRenderer={cell => cell.value}\n                sheetRenderer={renderSheet}\n                className={props.className}\n                isCellNavigable={(cell, row, col) => {return !cell.disableEvents ? true : false}}\n                // cellRenderer={renderRow}\n                onCellsChanged={changes => {\n                    const gridData = grid.map(row => [...row]);\n                    changes.forEach(({ cell, row, col, value }) => {\n                        console.log({ cell, row, col, value })\n                        let error = false;\n                        let className = cell.className;\n                        if(gridData[row][col]['required'] && value === \"\") {\n                            error = true;\n                            className = className + 'cell-error';\n                        } else {\n                            className = className ? className.replace(\"cell-error\",\"\") : 'null';\n                        }\n                        gridData[row][col] = { ...gridData[row][col], value, error: error, className };\n                    });\n                    setGrid(gridData);\n                    props.hasOwnProperty('gridValueChanged') && props.gridValueChanged(gridData, props.index);\n                }}\n            />}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}